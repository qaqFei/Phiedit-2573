# Phiedit 2573（Made by [@程序小袁_2573](https://space.bilibili.com/522248560)，目前最新版为v0.1.0）

## 项目介绍
Phiedit 2573 是一款基于 Vue-Electron 框架开发的 Phigros 谱面编辑器，编程语言为 Javascript，使用了 npm 包管理器，界面采用 Element Plus 组件库。
该项目从 2024 年的暑假开始开发，软件的设计参考了[@cmdysj](https://space.bilibili.com/252635690)的同类项目 Re:PhiEdit（以下简称 RPE），所以有很多功能都与 RPE 相同。那为什么我还要自己做一个呢？
原因就一个：

## RPE 的 bug 太多了！
**以 1.6.0 版本，win11 系统为例，这个 100多MB 的软件就有这么一堆 bug：**
1. 不安装微软常用运行库合集就会一打开就闪退，建议把软件本体和所需要的依赖都一起加进一个安装包里
2. 必须手动安装字体
3. 窗口无法全屏，也无法改变大小，导致每次写谱时都得盯着那个很小的屏幕看，猜测可能是把窗口大小写死在代码里了
4. 导入含中文路径的谱面会直接闪退，猜测是不支持 UTF-8 编码导致的
5. 导入谱面只支持 .pez 格式，.zip 格式的必须改后缀名才能导入
6. 导入谱面文件时出现的错误信息不明确，让人很难知道是哪里有问题
7. 为什么放置音符是先把鼠标对齐要放置的位置再按键盘，不能只用鼠标或只用键盘吗
8. 有时显示的时长为音乐时长的2倍，原因未知
9. 在音符的X坐标中输入太大的数字会直接闪退，猜测是数据溢出
10. 文字事件输入太多字会直接闪退，猜测是数据溢出
11. 按 Shift+鼠标框选 的快捷键时 Shift 键会切换输入法，导致后续按快捷键时会出现输入法窗口，建议改为直接拖动鼠标框选
12. 钩定事件修改其中一端的值，如果新值与旧值差值过小（0.01 以内），会导致另一端的值没有变
13. 单个元素无法复制，猜测内部实现可能是单元素时存储元素本身，多元素时存储数组，复制时只考虑了数组的情况
14. 无法用 Ctrl 键多选同时选中音符和事件，但Shift键框选可以
15. 修改 BPM 之后会出现音符打击特效显示的位置偏离判定线的问题，时间越靠后偏离得越严重，需要重新加载谱面才能解决，猜测是没有刷新缓存导致的
16. 首页在最后一个谱面再往下滚鼠标滚轮会回到第一个谱面，建议取消这个设定，因为我想滚到最后一个谱面时会下意识的一直往下滚鼠标滚轮
17. 事件不垫底会取第一个事件进行插值计算，导致缓动的时间插值为负数，出现奇怪的数值，有时甚至会数据溢出导致闪退
18. 判定线编辑的全局编辑，输入了以后不按确定就保存不上，建议输入的时候就保存
19. 长条太短时，上一帧长条还没有判定，下一帧长条就结束了，导致打击特效消失
20. 在暂停状态下切换倍速会导致时间略微偏移，原因未知
21. 标识名为一串数字，可读性低，作为文件夹名，会导致很难在文件资源管理器里找到自己要找的那张谱面，建议以曲名+随机字符的方式作为标识名
22. 光标经常卡在输入框里忘了拿出来，然后按快捷键也没反应，必须把光标拿开才能按快捷键，导致快捷键很不快捷
23. 有很多让人很难理解的术语，建议在软件界面添加解释说明
24. 文档中有些表述不清晰，影响理解
25. UI绑定需要输入 1~7 的数字，每个数字对应一个 UI，导致可读性低，建议弄一个下拉选择框让用户去选，把数字隐藏在内部实现中
26. Hold没有多押提示
27. BPM管理中滚轮可以无限滚动，导致把输入框滚没了，无法输入
28. 用 Ctrl+0 切换到 0 号判定线时，由于键盘上 Ctrl 和 0 的距离非常远，另一只手又要用鼠标，导致操作起来极不方便，建议改为其他快捷键
29. 事件的缓动曲线显示得不平滑
30. 事件头部标最小值，尾部标最大值，很令人迷惑，不如头部标头部值，尾部标尾部值，若非要标最大最小值，建议标在事件的左右两侧
31. 事件采样、配置缩略图、次透明化等功能用处不大，建议删除
32. 好多按钮按了似乎没反应，但实际上是有反应的，只是没有给反馈，建议按完加个文字提示
33. 界面不好看，按钮手感差，配色丑，建议用 HTML+CSS 做界面
34. 有很多不能在软件里编辑的属性，必须用改文件的方式才能编辑，猜测是懒得敲代码加功能了
35. 框选的时候很容易不小心点到旁边的时间轴，导致误操作
36. 事件值有时会出现 "-0.00" 这种数字，但实际上 0 应该是不分正负的
37. 修改数值的操作不会记录到历史记录里，导致撤销后再重做时修改后的值会丢失，建议把修改数值也纳入历史记录中
38. 在中文模式下，界面上有很多地方的文字仍然是英文，例如谱面纠错和判定线管理
39. 谱面纠错建议取消 "Note Judge Outscreen" 的警告，因为很多谱面都用到了屏幕内外来回闪的表演
40. 谱面纠错建议取消 "Hold Sticked" 的提示，因为根据我的经历，这个提示出现的地方都是一些比较正常的配置，完全看不出来哪有问题
41. 谱面纠错跳转时会默认对齐此音符，导致左右偏移，之后继续写谱的时候可能没注意，写到屏幕外面去了
42. 生成曲线轨迹用 "\$t\$" 作为时间自变量，输入起来很不方便，建议改为单个字母t
43. 生成曲线轨迹中有一些函数，但名字没有说，只能一个一个去猜，例如反正切函数不知道是 arctan() 还是 atan()，建议把可用的函数名字列出来
44. 先按 Ctrl+V，在不松开 Ctrl 和 V 两个键的情况下按B键，Ctrl+V 会触发两次
45. 特殊事件层级中，事件上没有数字和缓动曲线
46. 事件编辑界面左侧的微调按钮一点用没有，还特别容易误触到
47. 有些让人乍一看不知道啥意思的图标，建议图标解释不清楚的内容写纯文字
48. 谱面文件中含有换行符和空格，导致占用空间很大
49. 切换倍速时打击特效的播放速度有可能会异常
50. 在播放音乐时切出后台，若切出时间太长，再切回来的时候可能会白屏卡死
51. 文字事件无法显示文字，但点击选中文字事件后又正常了，原因未知
52. 特殊字符在文字事件中会显示为乱码，猜测是字体文件没有支持导致的
53. 不建议把谱面纠错的错误进行分类，因为会导致无法一次性看到所有的错误
54. 填充事件、填充音符等功能里的“密度”受横线数的影响，修改横线数会影响密度的单位，感觉这个设计不好
55. 设置的分类不好，让人难以找到要修改的设置项，例如“其他”、“其他2”
56. 导入判定线贴图只能通过向文件夹里加文件的方式，软件里根本没有相关功能
57. 使用事件转义功能时如果转义了数字或小数点，数字就会无限增大，且无法修改，只要一修改又会无限增大，还关不掉，建议禁止转义数字或小数点
58. 事件转义输入中文会直接卡死，猜测是不支持 UTF-8 编码导致的
59. 事件转义，修改后必须把窗口关掉，修改才能生效，而且点击别的地方窗口还不自动关闭
60. 有时用了事件转义后卡死崩溃掉了，然后重新进入 RPE 后，一点击事件，又卡死了，就这样一直循环，永远弄不好
61. 建议把判定线管理中的当前状态删除，因为很少会有人去看那么一堆密密麻麻的信息的
62. 无法修改音符的类型
63. 添加谱面后不进入直接退出，重新打开软件的时候会报错
64. 导入 json 文件的谱面时，chart.META 中的信息（如 offset）不会被导入

### bug 总结
- 异常检查不足，导致稳定性极差，经常闪退崩溃
- 软件的设计有问题，导致操作极不方便，建议自己当自己的用户，多写几张谱，找出其不方便的地方，然后去调整，同时也要听取其他用户给你反馈的意见
- 软件与文档绑定度过高，有些功能和快捷键只在文档里说过，软件里根本没有提示，导致什么东西都要翻文档才知道，很不方便，建议在软件里明显的地方加上解释
- 我知道你改掉这些 bug 的工作量很大，但请考虑一下广大谱师的感受


## 相比于RPE的优势
1. 稳定性高，不会出现各种奇怪的bug
2. 快捷键更方便使用，可以提高写谱效率
3. 上手难度低，对软件的功能有详细的介绍和教程
4. 基于我的写谱经验，我增加了一些更方便的功能
5. 使用element-plus做界面，更美观
6. 使用Javascript进行开发，有丰富的第三方库作为基础，维护成本更低

## 当然，我这个制谱器也有一些未修复的bug和未实现的功能
1. 不支持编辑特殊事件，也就是说写不了故事板
2. 不支持编辑shader
3. 我打算以后给这个软件增加游玩谱面和渲染谱面的功能，但这不是主要功能，所以没做
4. 性能差，当音符和事件特别多时FPS就会掉到30以下
5. 界面上没有分数、连击数、曲名等UI，也不支持UI绑定，如果想控分数/控连击数，请看顶部工具栏的分数/连击数
6. Hold 的打击特效频率是写死在程序里的，不能跟随 BPM 的变化而变化
7. 不支持`bpmfactor`、`alphaControl`、`posControl`、`sizeControl`、`skewControl`、`yControl`，因为不清楚这几个属性的含义
8. 导出的谱面导入进RPE会闪退，导入进Phira会卡死，导入进[lchzh3473的模拟器](https://lchzh3473.github.io/sim-phi/)却没有任何问题，不知道是我软件的bug，还是RPE和Phira的bug
9. 还有一些未发现的bug，如果你发现了bug或者有好的建议，请在issue中提出，或者进入[我的bilibili个人空间](https://space.bilibili.com/522248560)后发送私信给我！

## 参与开发  
想为本项目做贡献？请阅读[贡献指南](CONTRIBUTING.md)并从下方任务列表开始！

<!-- lchzh3473，cmdysj，XSilence_10231，大佬们能不能不要拉黑我啊，啊啊啊呜呜呜，球球了~ -->
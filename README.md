# Phiedit 2573 v0.2.0

## 项目介绍

Phiedit 2573 是 [@程序小袁_2573](https://space.bilibili.com/522248560) 开发的一款基于 Vue-Electron 框架开发的 Phigros 谱面编辑器、渲染器二合一的软件，编程语言为 Typescript，使用了 npm 包管理器，界面采用 Element Plus 组件库，使用 ffmpeg 进行谱面渲染。
本软件从 2024 年的暑假开始开发，设计方面参考了 [@cmdysj](https://space.bilibili.com/252635690) 开发的制谱软件 Re:PhiEdit（以下简称 RPE），所以有很多功能都与 RPE 相同。本项目也含有一些 [通义灵码](https://lingma.aliyun.com/) 和 [Deepseek](https://deepseek.com) 生成的代码。
**本软件不能代表包括 Phigros 在内的任何官方，仅为个人项目！**

## 版权声明

Copyright © 2025 程序小袁_2573. All rights reserved.
本项目所有源代码均采用 [MIT](https://opensource.org/licenses/MIT) 协议授权，详细信息请查看根目录的 [LICENSE](LICENSE) 文件。。

## 使用方法

1. 下载最新的 release
2. 运行 exe 安装包
3. 打开软件
4. 开始使用

### 基本操作

| 操作名称                 | 操作方法                                                                        |
| ------------------------ | ------------------------------------------------------------------------------- |
| 放置 Tap/Drag/Flick 音符 | 在界面左上角选择对应的 Note 类型，并在界面**左侧右键**放置                      |
| 放置 Hold 音符           | 在界面左上角选择 Hold，并在界面**左侧按住右键并拖动**                           |
| 放置事件                 | 在界面**右侧按住右键并拖动**                                                    |
| 拖拽 Tap/Drag/Flick 音符 | 直接用鼠标**左键拖拽**即可                                                      |
| 拖拽 Hold 音符或事件     | 直接用**鼠标靠近其头部或尾部，左键拖拽**即可                                    |
| 选中单个音符或事件       | 用鼠标左键直接点击                                                              |
| 选中多个音符或事件       | 在**空白处**按住鼠标**左键**，拖拽框选                                          |
| 修改音符或事件的属性     | 选中音符或事件，并修改**界面左侧**输入框或下拉菜单内的内容                      |
| 设置 BPM                 | 进入界面右侧的 BPM 编辑，并修改 BPM 的数值                                      |
| 切换判定线               | 点击界面右侧的判定线按钮，也可使用 A、D 键或者方括号键左右切换判定线            |
| 切换事件层级             | 点击界面上方的事件层级按钮                                                      |
| 播放/暂停                | 按空格键                                                                        |
| 预览谱面                 | 按 I 键                                                                         |
| 预览一小段谱面           | 按 T 或 U 键，并在你想停止预览时松开此键                                        |
| 剪切/复制/粘贴           | 点击界面右侧的“剪贴板管理”并点击相应的按钮，或者使用快捷键 Ctrl+X/Ctrl+C/Ctrl+V |
| 撤销/重做                | 点击界面右侧的“历史记录”并点击“撤销”或“重做”按钮，或者使用快捷键 Ctrl+Z/Ctrl+Y  |
| 删除音符/事件            | 选中音符或事件后按 Delete 键                                                    |
| 修改曲名/难度等信息      | 点击界面右侧的“谱面基本信息”并进行编辑                                          |
| 保存谱面                 | 点击界面左侧的“保存谱面”按钮，也可使用快捷键 Ctrl+S                             |
| 导出谱面                 | 点击界面左侧的“导出谱面”按钮，选择要保存的文件夹，点击保存                      |

### 高级操作

待补充。

### 常见问题及解决办法

Q:
> Note 和音乐对不上怎么办？

A:
> 确保你设置的 BPM 正确，歌曲的 BPM 可以通过一些免费工具测定。
>
> 另外，如果偏移设置的不对，也会导致对不上的问题。
>
> 请进入界面右侧的“BPM 编辑”设置正确的 BPM，并在右上角的“偏移”输入框中设置正确的偏移值。

Q:
> 判定线消失了怎么办？

A:
> 确保你当前判定线上，alpha 事件的值大于 0。
>
> 另外，请检查特殊事件层级，看看有没有 scaleX、scaleY 或者 text 事件。如果有，请检查它们的值是否为 0 或为空。
> 为 0 的 scaleX、scaleY 事件和为空的 text 事件都会让判定线无法显示。

Q:
> 为什么我设置了 moveX 和 moveY 事件，但是事件的值与判定线实际上显示的位置不同？

A:
> 第一个可能的原因是这条判定线被设置了父线。有父线的判定线会**以父线为坐标系**，而非以屏幕为坐标系。
>
> 第二个可能的原因是这条判定线被绑定了 UI。绑定了 UI 的判定线实际上显示的坐标等于判定线上 moveX 和 moveY 事件所设置的坐标**加上 UI 原坐标**（如果你对 UI 原坐标感兴趣，可以查看源代码 [constants.ts](src/constants.ts#L102) 中相关设置）。
>
> 第三个可能的原因是这条判定线上有其他事件层级影响着坐标。请检查其他的事件层级，看看是否有值不为 0 的事件。值不为 0 的事件会**累加到**判定线的坐标上。在你设置这个层级的事件之前，在其他层级上放置值为 0 的 moveX 和 moveY 事件。

## 一些未修复的 bug 和未实现的功能

1. 我打算以后给这个软件增加游玩谱面和渲染谱面的功能，已经实现了渲染功能，游玩功能待开发
    <!-- （写谱、上传、游玩一站式服务，再也不用在电脑和手机之间来回传文件了） -->
2. 性能差（经测试，音符数量大于 5000 时，帧率会降到 40 以下）
    <!-- （如果你的电脑支持 120 帧，可以打开，这样帧率就能翻倍了）-->
3. Hold 的打击特效频率是写死在程序里的，不能跟随 BPM 的变化而变化
    <!-- （只知道 Hold 的打击特效频率和 BPM 有关，但不知道是什么关系） -->
4. 有很多不支持的属性，因为不清楚这些属性的含义
    <!-- （不支持 Controls，bpmfactor，linkgroup 等属性） -->
5. 不支持 paint 事件，因为 RPE 已经弃用该功能
    <!-- （其实另一个原因是我不知道 paint 事件的具体逻辑是什么）-->
6. 导出的谱面导入进 RPE 会报错，不知道是我软件的 bug，还是 RPE 的 bug
    <!-- （肯定是有什么属性值没有写对） -->
7. 还有一些未发现的 bug，如果你发现了 bug 或者有好的建议，请在 Issue 中提出。

## 参与开发

想为本项目做贡献？请阅读[贡献指南](CONTRIBUTING.md)并从下方任务列表开始！
